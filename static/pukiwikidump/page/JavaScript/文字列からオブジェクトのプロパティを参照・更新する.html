<!DOCTYPE html>
<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="Tipsや調べたことなど、自分のために残したもの。">
		<meta name="author" content="ふくちはるき">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>JavaScript&#047;文字列からオブジェクトのプロパティを参照・更新する - ポケットがチケットでいっぱい（アーカイブ）</title>
		<base href="/static/pukiwikidump/">
		<link rel="stylesheet" href="style.css">
		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-21698320-3', 'auto');
		ga('send', 'pageview');
		</script>
	</head><body>
<div id="header">
			<h1>JavaScript&#047;文字列からオブジェクトのプロパティを参照・更新する</h1>
			<div id="navigator">
				<a class="return" href=".">トップページに戻る</a>
			</div>
		</div><div id="body">
<h2 id="content_1_0">キーワード  <a class="anchor_super" id="t66b9647" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#t66b9647" title="t66b9647">†</a></h2>
<ul class="list1" style="padding-left:16px;margin-left:16px"><li>JavaScript</li>
<li>オブジェクト
<ul class="list2" style="padding-left:16px;margin-left:16px"><li>プロパティ</li></ul></li>
<li>配列
<ul class="list2" style="padding-left:16px;margin-left:16px"><li>インデックス</li></ul></li></ul>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h2 id="content_1_1">したいこと  <a class="anchor_super" id="te139c2c" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#te139c2c" title="te139c2c">†</a></h2>
<pre>name = "a.b"</pre>
<p>で</p>
<pre>data.a.b</pre>
<p>を参照したい。また更新したい。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h2 id="content_1_2">どうやって  <a class="anchor_super" id="a7802d0a" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#a7802d0a" title="a7802d0a">†</a></h2>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h3 id="content_1_3">参照  <a class="anchor_super" id="f9bba347" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#f9bba347" title="f9bba347">†</a></h3>
<pre>console.log(
  name.split('.').reduce((data, prop) =&gt; data[prop], data)
)</pre>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h3 id="content_1_4">更新  <a class="anchor_super" id="dc4fd270" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#dc4fd270" title="dc4fd270">†</a></h3>
<pre>;(a =&gt; { a.pop(); return a })(name.split('.')).reduce((data, prop) =&gt; data[prop], data)[(a =&gt; a.pop())(name.split('.'))] = value</pre>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h2 id="content_1_5">例  <a class="anchor_super" id="t5baea0d" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#t5baea0d" title="t5baea0d">†</a></h2>
<pre>const data = {
	numbers: [ "one", "two", "three" ],
	greeting: {
		hi: "Hi!"
	},
}

name = "numbers.3"
value = "four"

;(a =&gt; { a.pop(); return a })(name.split('.')).reduce((data, prop) =&gt; data[prop], data)[(a =&gt; a.pop())(name.split('.'))] = value
console.log(name.split('.').reduce((data, prop) =&gt; data[prop], data))

name = "greeting.hello"
value = "Hello!"

;(a =&gt; { a.pop(); return a })(name.split('.')).reduce((data, prop) =&gt; data[prop], data)[(a =&gt; a.pop())(name.split('.'))] = value
console.log(name.split('.').reduce((data, prop) =&gt; data[prop], data))

console.log(data)</pre>
<p>の結果は、</p>
<pre>four
Hello!
{numbers:["one","two","three","four"],greeting:{hi:"Hi!",hello:"Hello!"}}</pre>
<p>になる。</p>
<p>オブジェクトならオブジェクトとしてプロパティが、配列なら配列としてインデックスが追加できてしまうのがJavaScriptの融通が効くすばらしいところ。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h2 id="content_1_6">ちなみに  <a class="anchor_super" id="ne421bc1" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#ne421bc1" title="ne421bc1">†</a></h2>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h3 id="content_1_7">前提知識  <a class="anchor_super" id="sa8ec491" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#sa8ec491" title="sa8ec491">†</a></h3>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_8">オブジェクトのプロパティは連想配列のようにできる  <a class="anchor_super" id="fc7b1c8a" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#fc7b1c8a" title="fc7b1c8a">†</a></h4>
<pre>data.a.b</pre>
<p>は</p>
<pre>data[a][b]</pre>
<p>と同じ。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_9">配列のインデックスは文字列でもよい  <a class="anchor_super" id="dbc17b81" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#dbc17b81" title="dbc17b81">†</a></h4>
<pre>data.c</pre>
<p>が配列なら</p>
<pre>data.c[0]</pre>
<p>と</p>
<pre>data.c['0']</pre>
<p>は同じに振る舞う。ので、名前は "c.0" とできる。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h3 id="content_1_10">解説  <a class="anchor_super" id="d39a1cde" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#d39a1cde" title="d39a1cde">†</a></h3>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_11">name.split('.')  <a class="anchor_super" id="t38a8b13" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#t38a8b13" title="t38a8b13">†</a></h4>
<p>プロパティの階層を掘るのに「.」を使うことを決めて、プロパティ名の配列を作る。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_12"><del>[data, ...names]</del>  <a class="anchor_super" id="u363d7ae" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#u363d7ae" title="u363d7ae">†</a></h4>
<p><del>dataが先頭にあって、プロパティ名が後に続く配列を作る。</del></p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_13">.reduce((data, prop) =&gt; data[prop], data)  <a class="anchor_super" id="iec5c1d5" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#iec5c1d5" title="iec5c1d5">†</a></h4>
<p>dataから順番にプロパティを掘っていく。<del>先にdataを先頭に乗せたのはそのため。</del>reduce()でinitialValueを与えることができる。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_14">(a =&gt; { a.pop(); return a })(names)  <a class="anchor_super" id="d563ac30" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#d563ac30" title="d563ac30">†</a></h4>
<p>更新の場合、末端のプロパティのプリミティブ型の値（の、ばっかり）を得てしまっても意味がない。ので、ひとつ手前まで取得するように、プロパティ名の配列（末端を除く）を作成する。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_15">(a =&gt; a.pop())(name.split('.'))  <a class="anchor_super" id="jcedc308" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#jcedc308" title="jcedc308">†</a></h4>
<p>ひとつ手前までのオブジェクトまたは配列まで取得したら最後に末端のプロパティ名またはインデックスを指定する。そこに値を代入する。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h4 id="content_1_16">;  <a class="anchor_super" id="ba5be070" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#ba5be070" title="ba5be070">†</a></h4>
<p>文末に「;」を書かない派だと、前の文によっては誤解が生じるので文を切っておく。</p>

<div class="jumpmenu"><a href="page/JavaScript/文字列からオブジェクトのプロパティを参照・更新する.html#navigator">↑</a></div><h2 id="content_1_17">参考  <a class="anchor_super" id="yf784ea8" href="page/JavaScript/%E6%96%87%E5%AD%97%E5%88%97%E3%81%8B%E3%82%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3%E3%82%92%E5%8F%82%E7%85%A7%E3%83%BB%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B.html#yf784ea8" title="yf784ea8">†</a></h2>
<ul class="list1" style="padding-left:16px;margin-left:16px"><li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/split" rel="nofollow">String.prototype.split() - JavaScript | MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Spread_operator" rel="nofollow">スプレッド演算子 - JavaScript | MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" rel="nofollow">Array.prototype.reduce() - JavaScript | MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/pop" rel="nofollow">Array.prototype.pop() - JavaScript | MDN</a></li>
<li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/arrow_functions" rel="nofollow">アロー関数 - JavaScript | MDN</a></li></ul>
</div><div id="lastmodified">Last-modified: 2017-12-28 (木) 02:12:43  (634d)</div><div id="sponsor-link">
			<p>スポンサーリンク</p>
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

			<!-- wiki/記事下左 - レクタングル -->
			<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-3652547341671748" data-ad-slot="4606605347"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script>

			<!-- wiki/記事下右 - レクタングル -->
			<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-3652547341671748" data-ad-slot="6083338544"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script>
		</div><div id="footer">
			<p class="description">Tipsや調べたことなど、自分のために残したもの。</p>
			<div class="site-admin"><a href="https://fukuchiharuki.me/">ふくちはるき</a></div>
			<div class="timestamp">2019-09-23T20:00:18</div>
		</div></body>
</html>
